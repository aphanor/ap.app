var BV=angular.module("bvapp",["angular-loading-bar","ngAnimate","ngRoute","ui.bootstrap","ngSanitize","hm.readmore","ngclipboard"]);BV.config(["$routeProvider","$locationProvider",function(e,r){e.when("/apichecker",{templateUrl:"views/apichecker.html",controller:"bvapi"}).when("/apibuilder",{templateUrl:"views/apibuilder.html",controller:"bvapi"}).when("/",{templateUrl:"views/api-index.html"}).otherwise({redirectTo:"/"})}]);

BV.controller("bvapi",["$scope","APIapp",function(a,t){a.cookey=Cookies.get("viewed"),a.reloadPage=function(){window.location.reload()},a.locales=["","en_GB","en_US","fr_FR","de_DE","es_ES","it_IT"],a.type=["reviews","questions"],a.limites=["5","10","50","100"],a.submitAPI=function(){t.apibuilder(a.passkey,a.types,a.staging)},a.checkAPI=function(){t.apichecker(a.api_URL)}}]),BV.factory("APIapp",["$http","$window","$q","$rootScope","$routeParams","$location","$route","$timeout",function(a,t,e,s,o,r,n,p){return s.oneAtATime=!0,s.status={isCustomHeaderOpen:!1,isFirstOpen:!0,isFirstDisabled:!1},{apibuilder:function(t,e,i){function o(){s.passkey.length>14?a.get(s.api+s.passkey).then(function(a){console.log(a.data.HasErrors),s.check=a.data.HasErrors,s.apiURL=s.api+s.passkey,0==s.check?"reviews"==s.types?(s.data=a.data,s.first_id=s.data.Results[0].ProductId,console.log(a.data)):"questions"==s.types?(s.dataQA=a.data,console.log(s.dataQA),s.first_id=s.dataQA.Results[0].ProductId,s.q_first=s.dataQA.Results[0].Id):"authors"==s.types?s.dataAuth=a.data:"products"==s.types&&(s.dataProducts=a.data):s.noapi=a.data.Errors[0].Message}):s.errormessage="Invalid API KEY"}s.api,s.prod_api="http://api.bazaarvoice.com/data/",s.stg_api="http://stg.api.bazaarvoice.com/data/",s.passkey=t,s.types=e,s.staging=i,1==s.staging?(s.bv_api=s.stg_api+s.types+".json?apiversion=5.4",s.api=s.stg_api+s.types+".json?apiversion=5.4&passkey=",o(),a.get(s.stg_api+s.types+".json?apiversion=5.4&passkey="+s.passkey+"&limit=5").then(function(a){s.data_test=a.data,console.log(s.data_test)})):(s.bv_api=s.prod_api+s.types+".json?apiversion=5.4",s.api=s.prod_api+s.types+".json?apiversion=5.4&passkey=",o(),a.get(s.prod_api+s.types+".json?apiversion=5.4&passkey="+s.passkey+"&limit=5").then(function(a){s.data_test=a.data,console.log(s.data_test)}))},apichecker:function(t){function o(){a.get(s.api_URL).then(function(a){if(s.apidata=a.data,1==a.data.HasErrors)s.errormessage=a.data.Errors[0].Message,s.errorCheck=a.data.HasErrors;else if(-1!=s.api_URL.indexOf("reviews.json")){s.apidata=a.data,s.results=s.apidata.Results,s.totalReviews=s.apidata.TotalResults,s.Locale=s.apidata.Locale,s.ratingsOnly=s.apidata.IsRatingsOnly,s.apicalllimit=s.apidata.Limit,s.SyndicationCount=0,s.RatingsOnly=0,s.objectData=[];var t=!1;if((s.apidata.Includes.Products.length>0||s.apidata.Includes.ProductsOrder.length>0)&&(s.ProductsData=s.apidata.Includes.Products,s.ProductsAttributes=s.apidata.Includes.ProductsOrder),angular.forEach(s.results,function(a,t){s.resultsData=JSON.stringify(a.IsSyndicated),s.ratingsOnlyReview=JSON.stringify(a.IsRatingsOnly),"true"==s.ratingsOnlyReview&&s.RatingsOnly++,"true"==s.resultsData&&(s.SyndicationCount++,s.SReviews={},s.SReviews.id=a.Id,s.SReviews.source=a.SyndicationSource.Name,s.objectData.push(s.SReviews))}),e.all(s.objectData).then(function(){s.SourcesSyndicated=s.objectData}),angular.forEach(s.apidata.Includes.Products,function(a,e){var i=/^(?:https?:\/\/)?(?:[^@\/\n]+@)?(?:www\.)?([^:\/\n]+)/gm;if(1!=t){var o=a.ProductPageUrl;t=!0}var o=a.ProductPageUrl,r=new RegExp(i),n=r.exec(o);"null"!=n[1]&&(s.clientURL=n[0],s.client=n[1])}),s.limit=s.apidata.Limit,s.page=s.apidata.TotalResults/s.limit,s.page!=Math.floor(s.page))for(s.page=Math.floor(s.page)+1,i=0;i<s.page;i++)if(0==i){var r=s.api_URL;s.pager={urls:[{url:r}]}}else s.Offset=i*s.limit,s.pager.urls.push({url:s.api_URL+"&offset="+s.Offset});s.paginations=s.pager.urls}else-1!=s.api_URL.indexOf(".xml?")?(s.api_URL=s.api_URL.replace(".xml?",".json?"),p(o(),500)):-1!=s.api_URL.indexOf("questions.json")?(console.log(s.apidata),s.errormessage="Not supported yet"):-1!=s.api_URL.indexOf("statistics.json")?(console.log(s.apidata),s.errormessage="Not supported yet"):-1!=s.api_URL.indexOf("reviewcomments.json")?(console.log(s.apidata),s.errormessage="Not supported yet"):-1!=s.api_URL.indexOf("answers.json")?(console.log(s.apidata),s.errormessage="Not supported yet"):-1!=s.api_URL.indexOf("authors.json")?(console.log(s.apidata),s.errormessage="Not supported yet"):-1!=s.api_URL.indexOf("products.json")?(console.log(s.apidata),s.errormessage="Not supported yet"):s.errormessage="Invalid API call"})}console.log(t),s.api_URL=t,-1!=s.api_URL.indexOf("&include=products")?o():(s.api_URL=s.api_URL+"&include=products",o())}}}]);

!function(e,t,a,n,c,s,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=t.createElement(a),o=t.getElementsByTagName(a)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-39741636-2","auto"),ga("send","pageview");

//# sourceMappingURL=all.js.map