var BV=angular.module("bvapp",["angular-loading-bar","ngAnimate","ui.bootstrap"]);BV.controller("bvapi",["$scope","$http","$window","$q","$rootScope",function(t,e,s,o,n){t.reloadPage=function(){window.location.reload()},t.locales=["en_GB","en_US","fr_FR","de_DE","es_ES","it_IT"],t.type=["reviews","questions"],t.limites=["5","10","50","100"],t.api,t.prod_api="http://api.bazaarvoice.com/data/",t.stg_api="http://stg.api.bazaarvoice.com/data/",t.oneAtATime=!0,t.status={isCustomHeaderOpen:!1,isFirstOpen:!0,isFirstDisabled:!1},t.submitAPI=function(){function a(){t.passkey.length>14?e.get(t.api+t.passkey).then(function(a){console.log(a.data.HasErrors),t.check=a.data.HasErrors,t.apiURL=t.api+t.passkey,0==t.check?"reviews"==t.types?(t.data=a.data,t.first_id=t.data.Results[0].ProductId,console.log(a.data)):"questions"==t.types?(t.dataQA=a.data,console.log(t.dataQA),t.first_id=t.dataQA.Results[0].ProductId,t.q_first=t.dataQA.Results[0].Id):"authors"==t.types?t.dataAuth=a.data:"products"==t.types&&(t.dataProducts=a.data):t.noapi=a.data.Errors[0].Message}):t.errormessage="Invalid API KEY"}t.passkey,1==t.staging?(t.bv_api=t.stg_api+t.types+".json?apiversion=5.4",t.api=t.stg_api+t.types+".json?apiversion=5.4&passkey=",a(),e.get(t.stg_api+t.types+".json?apiversion=5.4&passkey="+t.passkey+"&limit=5").then(function(a){t.data_test=a.data,console.log(t.data_test)})):(t.bv_api=t.prod_api+t.types+".json?apiversion=5.4",t.api=t.prod_api+t.types+".json?apiversion=5.4&passkey=",a(),e.get(t.prod_api+t.types+".json?apiversion=5.4&passkey="+t.passkey+"&limit=5").then(function(a){t.data_test=a.data,console.log(t.data_test)}))},t.checkAPI=function(){function s(){e.get(t.api_URL).then(function(s){if(t.apidata=s.data,-1!=t.api_URL.indexOf("reviews.json")){if(t.apidata=s.data,console.log(t.apidata),t.results=t.apidata.Results,t.totalReviews=t.apidata.TotalResults,t.Locale=t.apidata.Locale,t.ratingsOnly=t.apidata.IsRatingsOnly,t.SCount=0,t.IRO=0,t.objectData=[],angular.forEach(t.results,function(a,e){t.resultsData=JSON.stringify(a.IsSyndicated),t.ratingsOnlyReview=JSON.stringify(a.IsRatingsOnly),"true"==t.ratingsOnlyReview&&t.IRO++,"true"==t.resultsData&&(t.SCount++,t.SReviews={},t.SReviews.id=a.Id,t.SReviews.source=a.SyndicationSource.Name,t.objectData.push(t.SReviews))}),t.limit=t.apidata.Limit,t.page=t.apidata.TotalResults/t.limit,console.log("Page: "+t.page+" - Limit: "+t.limit),t.p={},t.pager=[],t.page!=Math.floor(t.page))for(t.page=Math.floor(t.page)+1,console.log("New page: "+t.page),i=0;i<t.page.length;i++)0==i?e.get(t.api_URL).then(function(e){t.api_URL='"'+t.api_URL+'"',t.pager={url:+t.api_URL},console.log(a)}):(t.Offset=i*t.limit,console.log("Offset: "+t.Offset),e.get(t.api_URL+"&offset="+t.Offset).then(function(a){var e='"'+t.api_URL+"&offset="+t.Offset+'"',s={url:+e};t.pager.push(s)}));o.all(t.objectData).then(function(){t.SourcesSyndicated=t.objectData}),o.all(t.p).then(function(){console.log(t.p)})}else-1!=t.api_URL.indexOf("questions.json")?console.log(t.apidata):-1!=t.api_URL.indexOf("statistics.json")?console.log(t.apidata):-1!=t.api_URL.indexOf("reviewcomments.json")?console.log(t.apidata):-1!=t.api_URL.indexOf("answers.json")?console.log(t.apidata):-1!=t.api_URL.indexOf("authors.json")?console.log(t.apidata):-1!=t.api_URL.indexOf("products.json")?console.log(t.apidata):t.errormessage="Invalid API call"})}-1!=t.api_URL.indexOf("&include=products")?s():(t.api_URL=t.api_URL+"&include=products",s())}}]);

//# sourceMappingURL=all.js.map