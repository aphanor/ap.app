var BV=angular.module("bvapp",["angular-loading-bar","ngAnimate","ngRoute","ui.bootstrap","ngSanitize","hm.readmore","ngclipboard"]);BV.config(["$routeProvider","$locationProvider",function(e,r){e.when("/apichecker",{templateUrl:"views/apichecker.html",controller:"bvapi"}).when("/apibuilder",{templateUrl:"views/apibuilder.html",controller:"bvapi"}).when("/",{templateUrl:"views/api-index.html"}).otherwise({redirectTo:"/"})}]);

BV.factory("API",["$scope","$http","$window","$q","$rootScope","$routeParams","$location","$route","$timeout",function(a,t,e,s,o,r,n,p,d){return{builder:function(){function e(){a.passkey.length>14?t.get(a.api+a.passkey).then(function(t){console.log(t.data.HasErrors),a.check=t.data.HasErrors,a.apiURL=a.api+a.passkey,0==a.check?"reviews"==a.types?(a.data=t.data,a.first_id=a.data.Results[0].ProductId,console.log(t.data)):"questions"==a.types?(a.dataQA=t.data,console.log(a.dataQA),a.first_id=a.dataQA.Results[0].ProductId,a.q_first=a.dataQA.Results[0].Id):"authors"==a.types?a.dataAuth=t.data:"products"==a.types&&(a.dataProducts=t.data):a.noapi=t.data.Errors[0].Message}):a.errormessage="Invalid API KEY"}a.passkey,1==a.staging?(a.bv_api=a.stg_api+a.types+".json?apiversion=5.4",a.api=a.stg_api+a.types+".json?apiversion=5.4&passkey=",e(),t.get(a.stg_api+a.types+".json?apiversion=5.4&passkey="+a.passkey+"&limit=5").then(function(t){a.data_test=t.data,console.log(a.data_test)})):(a.bv_api=a.prod_api+a.types+".json?apiversion=5.4",a.api=a.prod_api+a.types+".json?apiversion=5.4&passkey=",e(),t.get(a.prod_api+a.types+".json?apiversion=5.4&passkey="+a.passkey+"&limit=5").then(function(t){a.data_test=t.data,console.log(a.data_test)}))},checker:function(){function e(){t.get(a.api_URL).then(function(t){if(a.apidata=t.data,1==t.data.HasErrors)a.errormessage=t.data.Errors[0].Message,a.errorCheck=t.data.HasErrors;else if(-1!=a.api_URL.indexOf("reviews.json")){a.apidata=t.data,console.log(a.apidata),a.results=a.apidata.Results,a.totalReviews=a.apidata.TotalResults,a.Locale=a.apidata.Locale,a.ratingsOnly=a.apidata.IsRatingsOnly,a.apicalllimit=a.apidata.Limit,(a.apidata.Includes.Products.length>0||a.apidata.Includes.ProductsOrder.length>0)&&(a.ProductsData=a.apidata.Includes.Products,a.ProductsAttributes=a.apidata.Includes.ProductsOrder),a.SCount=0,a.IRO=0,a.objectData=[],angular.forEach(a.results,function(t,e){a.resultsData=JSON.stringify(t.IsSyndicated),a.ratingsOnlyReview=JSON.stringify(t.IsRatingsOnly),"true"==a.ratingsOnlyReview&&a.IRO++,"true"==a.resultsData&&(a.SCount++,a.SReviews={},a.SReviews.id=t.Id,a.SReviews.source=t.SyndicationSource.Name,a.objectData.push(a.SReviews))});var o=!1;if(angular.forEach(a.apidata.Includes.Products,function(t,e){var s=/^(?:https?:\/\/)?(?:[^@\/\n]+@)?(?:www\.)?([^:\/\n]+)/gm;if(1!=o){var i=t.ProductPageUrl;o=!0}var i=t.ProductPageUrl,r=new RegExp(s),n=r.exec(i);"null"!=n[1]&&(a.clientURL=n[0],a.client=n[1])}),a.limit=a.apidata.Limit,a.page=a.apidata.TotalResults/a.limit,a.page!=Math.floor(a.page))for(a.page=Math.floor(a.page)+1,i=0;i<a.page;i++)if(0==i){var r=a.api_URL;a.pager={urls:[{url:r}]}}else a.Offset=i*a.limit,console.log("Offset: "+a.Offset),a.pager.urls.push({url:a.api_URL+"&offset="+a.Offset});console.log(a.pager.urls),a.paginations=a.pager.urls,s.all(a.objectData).then(function(){a.SourcesSyndicated=a.objectData})}else-1!=a.api_URL.indexOf(".xml?")?(a.api_URL=a.api_URL.replace(".xml?",".json?"),d(e(),500)):-1!=a.api_URL.indexOf("questions.json")?(console.log(a.apidata),a.errormessage="Not supported yet"):-1!=a.api_URL.indexOf("statistics.json")?(console.log(a.apidata),a.errormessage="Not supported yet"):-1!=a.api_URL.indexOf("reviewcomments.json")?(console.log(a.apidata),a.errormessage="Not supported yet"):-1!=a.api_URL.indexOf("answers.json")?(console.log(a.apidata),a.errormessage="Not supported yet"):-1!=a.api_URL.indexOf("authors.json")?(console.log(a.apidata),a.errormessage="Not supported yet"):-1!=a.api_URL.indexOf("products.json")?(console.log(a.apidata),a.errormessage="Not supported yet"):a.errormessage="Invalid API call"})}-1!=a.api_URL.indexOf("&include=products")?e():(a.api_URL=a.api_URL+"&include=products",e())}}}]);

BV.controller("bvapi",["$scope","$http","$window","$q","$rootScope","$routeParams","$location","$route","$timeout",function(a,e,t,s,o,r,n,p,d){o.cookey=Cookies.get("viewed"),a.reloadPage=function(){window.location.reload()},a.locales=["","en_GB","en_US","fr_FR","de_DE","es_ES","it_IT"],a.type=["reviews","questions"],a.limites=["5","10","50","100"],a.api,a.prod_api="http://api.bazaarvoice.com/data/",a.stg_api="http://stg.api.bazaarvoice.com/data/",a.oneAtATime=!0,a.status={isCustomHeaderOpen:!1,isFirstOpen:!0,isFirstDisabled:!1},a.submitAPI=function(){function t(){a.passkey.length>14?e.get(a.api+a.passkey).then(function(e){console.log(e.data.HasErrors),a.check=e.data.HasErrors,a.apiURL=a.api+a.passkey,0==a.check?"reviews"==a.types?(a.data=e.data,a.first_id=a.data.Results[0].ProductId,console.log(e.data)):"questions"==a.types?(a.dataQA=e.data,console.log(a.dataQA),a.first_id=a.dataQA.Results[0].ProductId,a.q_first=a.dataQA.Results[0].Id):"authors"==a.types?a.dataAuth=e.data:"products"==a.types&&(a.dataProducts=e.data):a.noapi=e.data.Errors[0].Message}):a.errormessage="Invalid API KEY"}a.passkey,1==a.staging?(a.bv_api=a.stg_api+a.types+".json?apiversion=5.4",a.api=a.stg_api+a.types+".json?apiversion=5.4&passkey=",t(),e.get(a.stg_api+a.types+".json?apiversion=5.4&passkey="+a.passkey+"&limit=5").then(function(e){a.data_test=e.data,console.log(a.data_test)})):(a.bv_api=a.prod_api+a.types+".json?apiversion=5.4",a.api=a.prod_api+a.types+".json?apiversion=5.4&passkey=",t(),e.get(a.prod_api+a.types+".json?apiversion=5.4&passkey="+a.passkey+"&limit=5").then(function(e){a.data_test=e.data,console.log(a.data_test)}))},a.checkAPI=function(){function t(){e.get(a.api_URL).then(function(e){if(a.apidata=e.data,1==e.data.HasErrors)a.errormessage=e.data.Errors[0].Message,a.errorCheck=e.data.HasErrors;else if(-1!=a.api_URL.indexOf("reviews.json")){a.apidata=e.data,console.log(a.apidata),a.results=a.apidata.Results,a.totalReviews=a.apidata.TotalResults,a.Locale=a.apidata.Locale,a.ratingsOnly=a.apidata.IsRatingsOnly,a.apicalllimit=a.apidata.Limit,(a.apidata.Includes.Products.length>0||a.apidata.Includes.ProductsOrder.length>0)&&(a.ProductsData=a.apidata.Includes.Products,a.ProductsAttributes=a.apidata.Includes.ProductsOrder),a.SCount=0,a.IRO=0,a.objectData=[],angular.forEach(a.results,function(e,t){a.resultsData=JSON.stringify(e.IsSyndicated),a.ratingsOnlyReview=JSON.stringify(e.IsRatingsOnly),"true"==a.ratingsOnlyReview&&a.IRO++,"true"==a.resultsData&&(a.SCount++,a.SReviews={},a.SReviews.id=e.Id,a.SReviews.source=e.SyndicationSource.Name,a.objectData.push(a.SReviews))});var o=!1;if(angular.forEach(a.apidata.Includes.Products,function(e,t){var s=/^(?:https?:\/\/)?(?:[^@\/\n]+@)?(?:www\.)?([^:\/\n]+)/gm;if(1!=o){var i=e.ProductPageUrl;o=!0}var i=e.ProductPageUrl,r=new RegExp(s),n=r.exec(i);"null"!=n[1]&&(a.clientURL=n[0],a.client=n[1])}),a.limit=a.apidata.Limit,a.page=a.apidata.TotalResults/a.limit,a.page!=Math.floor(a.page))for(a.page=Math.floor(a.page)+1,i=0;i<a.page;i++)if(0==i){var r=a.api_URL;a.pager={urls:[{url:r}]}}else a.Offset=i*a.limit,console.log("Offset: "+a.Offset),a.pager.urls.push({url:a.api_URL+"&offset="+a.Offset});console.log(a.pager.urls),a.paginations=a.pager.urls,s.all(a.objectData).then(function(){a.SourcesSyndicated=a.objectData})}else-1!=a.api_URL.indexOf(".xml?")?(a.api_URL=a.api_URL.replace(".xml?",".json?"),d(t(),500)):-1!=a.api_URL.indexOf("questions.json")?(console.log(a.apidata),a.errormessage="Not supported yet"):-1!=a.api_URL.indexOf("statistics.json")?(console.log(a.apidata),a.errormessage="Not supported yet"):-1!=a.api_URL.indexOf("reviewcomments.json")?(console.log(a.apidata),a.errormessage="Not supported yet"):-1!=a.api_URL.indexOf("answers.json")?(console.log(a.apidata),a.errormessage="Not supported yet"):-1!=a.api_URL.indexOf("authors.json")?(console.log(a.apidata),a.errormessage="Not supported yet"):-1!=a.api_URL.indexOf("products.json")?(console.log(a.apidata),a.errormessage="Not supported yet"):a.errormessage="Invalid API call"})}-1!=a.api_URL.indexOf("&include=products")?t():(a.api_URL=a.api_URL+"&include=products",t())}}]);

!function(e,t,a,n,c,s,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=t.createElement(a),o=t.getElementsByTagName(a)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-39741636-2","auto"),ga("send","pageview");

//# sourceMappingURL=all.js.map